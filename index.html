<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <title>Teste VoxImplant Calls</title>
  <script src="https://cdn.jsdelivr.net/npm/voximplant-websdk@4.9.0-2915/voximplant.min.js"></script>
</head>
<body>
  <h2>Teste de Chamada VoxImplant</h2>

  <div>
    <label for="number">Número/Usuário:</label>
    <input type="text" id="number" placeholder="Digite o número">
    <button onclick="startcall()">Ligar</button>
  </div>

  <div style="margin-top:20px;">
    <button onclick="answercall()">Atender</button>
    <button onclick="declinecall()">Recusar</button>
    <button onclick="endcall()">Finalizar</button>
  </div>

  <div style="margin-top:20px;">
    <pre id="log"></pre>
  </div>

  <script>
    initialize();
    /*const sdk = VoxImplant.getInstance();
    let currentCall = null;

    async function initialize() {
      const initParameters = {
        node: VoxImplant.ConnectionNode.NODE_9,
        micRequired: true,
        showDebugInfo: true,
        showWarnings: true
      };

      try {
        await sdk.init(initParameters);
        console.log("SDK inicializado");
      } catch (e) {
        console.log("Falha ao inicializar SDK", e.code, e.message);
      }

      await sdk.connect();

      sdk.on(VoxImplant.Events.AuthResult, function (e) {
        if (e.result === true) {
          console.log("Login com sucesso");
        } else {
          console.log(e.code, e.message);
        }
      });

      sdk.on(VoxImplant.Events.IncomingCall, (e) => {
        console.log("Chamada recebida!");
        currentCall = e.call;

        document.getElementById("answer").onclick = () => {
          currentCall.answer();
        };

        document.getElementById("decline").onclick = () => {
          currentCall.decline();
        };
      });

      await sdk.login(`vitor@voicecall.vlima.voximplant.com`, "12345678");
    }*/

  </script>
  <script src="https://cdn.jsdelivr.net/npm/voximplant-websdk@4.9.0-2915/voximplant.min.js"></script>
  <script src="index.js" defer></script>
</body>
</html>
