<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <title>Teste VoxImplant Calls</title>
  <script src="https://cdn.jsdelivr.net/npm/voximplant-websdk@4.9.0-2915/voximplant.min.js"></script>
  <script src="index.js" defer></script>
</head>
<body>
  <h2>Teste de Chamada VoxImplant</h2>

  <div>
    <label for="number">Número/Usuário:</label>
    <input type="text" id="number" placeholder="destinatario@app.account.voximplant.com">
    <button id="call" onclick="startcall()">Ligar</button>
  </div>

  <div style="margin-top:20px;">
    <button id="answer">Atender</button>
    <button id="decline">Recusar</button>
    <button id="endcall">Encerrar</button>
  </div>

  <div style="margin-top:20px;">
    <pre id="log"></pre>
  </div>

  <script>
    // Inicialização simples do SDK (ajuste node/login conforme seu ambiente)
    const sdk = VoxImplant.getInstance();

    async function intialize() {

    const initParameters = {
        node:VoxImplant.ConnectionNode.NODE_9,
        micRequired: true,
        showDebugInfo: true,
        showWarnings: true
    };
      
    try {
        await sdk.init(initParameters);
        console.log("SDK inicializado");
    } catch (e) {
        console.log("Falha ao inicializar SDK ", e.code,e.message);
    };
      
    await sdk.connect();

    sdk.on(VoxImplant.Events.AuthResult, function (e) {
        if (e.result === true){
          console.log("Login com sucesso")
        } else {
          console.log(e.code, e.message);
        }
    });

    await sdk.login(`vitorr@voicecall.vlima.voximplant.com`, "12345678");
    }

    intialize();
  </script>
</body>
</html>
